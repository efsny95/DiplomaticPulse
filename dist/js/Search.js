var Suggestion=function(){"use strict";function e(e){this.$parent=$(e),this.$element=t(this.$parent),this.hasSuggestions=!1}var t=function(e){var t='<div id="suggestions"><ul></ul></div>';return e.after(t)};return e}(),Search=function(){"use strict";function e(e,t){this.$input=$(e),this.q=QIX.app,this.field=t||"teaser",this.minChars=3,this.init()}var t={9:"tab",27:"esc",37:"left",39:"right",13:"enter",38:"up",40:"down",32:"space",16:"shift",17:"ctrl"};return e.prototype={_keyup:function(e){return t[e.keyCode]||t[e.which]?!1:(0==e.currentTarget.value.length&&($("#qv-search-clear").hide(),this.q.getField(this.field).then(function(e){e.clear().then(function(){$("#main").fadeTo(50,.5).fadeTo(200,1),pubsub.publish("update")})})),e.currentTarget.value.length<this.minChars?!1:($("#qv-search-clear").show(),void this.doSearch(e.target.value)))},bindevents:function(){var e=this;this.$input.on("input",debounce(function(t){e._keyup(t)},250))},doSearch:function(e){var t=e.split(" ");this.q.selectAssociations({qSearchFields:[this.field],qContext:"CurrentSelections"},t,0).then(function(e){$("#main").fadeTo(50,.5).fadeTo(200,1),pubsub.publish("update")})},clear:function(){var e=document.getElementById("qv-search"),t=document.getElementById("qv-search-clear");0!==e.value.length&&(t.style.display="none",this.q.getField(this.field).then(function(t){t.clear().then(function(){e.value="",$("#main").fadeTo(50,.5).fadeTo(200,1),pubsub.publish("update")})}))},init:function(){this.bindevents();var e=document.getElementById("qv-search-clear");e.addEventListener("click",function(){this.clear()}.bind(this),!1)}},e}();